---
layout: default
class: api-reference
title: "SMTP API - API Reference"
description: "Use the X-MSYS-API header to customize options for messages sent via SMTP."
---
<div id="apipage" class="container-fluid"><div class="row"><div id="menublock"><!--input(type='text' id='search')--><nav id="apimenu"><div class="resource-group"><div class="heading"><a href="index" class="text-uppercase">Overview</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="index#header-api-endpoints">API Endpoints</a></li><li><a href="index#header-api-conventions">API Conventions</a></li><li><a href="index#header-authentication">Authentication</a></li><li><a href="index#header-using-postman">Using Postman</a></li><li><a href="index#header-using-curl">Using cURL</a></li><li><a href="index#header-subaccounts">Subaccounts</a></li><li><a href="index#header-terminology">Terminology</a></li><li><a href="index#header-managing-subaccount-data-as-a-service-provider">Managing subaccount data as a Service Provider</a></li><li><a href="index#header-managing-master-account-data-as-a-service-provider">Managing master account data as a Service Provider</a></li><li><a href="index#header-smtp-relay-endpoints">SMTP Relay Endpoints</a></li><li><a href="index#header-sparkpost-smtp-endpoint">SparkPost SMTP Endpoint</a></li><li><a href="index#header-sparkpost-elite-smtp-endpoint">SparkPost Elite SMTP Endpoint</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="substitutions-reference" class="text-uppercase">Substitutions Reference</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="substitutions-reference#header-key-features">Key Features</a></li><li><a href="substitutions-reference#header-substitution-data">Substitution Data</a></li><li><a href="substitutions-reference#header-template-start-and-end-markers">Template Start and End Markers</a></li><li><a href="substitutions-reference#header-determination-of-expressions-and-statements">Determination of Expressions and Statements</a></li><li><a href="substitutions-reference#header-missing-substitution-values">Missing Substitution Values</a></li><li><a href="substitutions-reference#header-statements-on-their-own-line">Statements on Their Own Line</a></li><li><a href="substitutions-reference#header-escaping-start-and-end-tags">Escaping Start and End Tags</a></li><li><a href="substitutions-reference#header-escaping-html-values">Escaping HTML Values</a></li><li><a href="substitutions-reference#header-escaping-links">Escaping Links</a></li><li><a href="substitutions-reference#header-preventing-html-escaping">Preventing HTML Escaping</a></li><li><a href="substitutions-reference#header-personalized-links">Personalized Links</a></li><li><a href="substitutions-reference#header-link-names">Link Names</a></li><li><a href="substitutions-reference#header-unsubscribe-links">Unsubscribe Links</a></li><li><a href="substitutions-reference#header-per-link-disabling-of-click-tracking">Per-link Disabling of Click Tracking</a></li><li><a href="substitutions-reference#header-custom-link-sub-paths">Custom Link Sub-Paths</a></li><li><a href="substitutions-reference#header-link-attributes-in-text-parts">Link Attributes in Text Parts</a></li><li><a href="substitutions-reference#header-substitutions-syntax-examples">Substitutions Syntax Examples</a></li><li><a href="substitutions-reference#header-basic-substitution">Basic Substitution</a></li><li><a href="substitutions-reference#header-referencing-a-nested-object">Referencing a Nested Object</a></li><li><a href="substitutions-reference#header-if-then-else-syntax">if then else Syntax</a></li><li><a href="substitutions-reference#header-if-not-syntax">if not Syntax</a></li><li><a href="substitutions-reference#header-elseif-syntax">elseif Syntax</a></li><li><a href="substitutions-reference#header-expressions-in-conditionals-(,-,-,-,-,-)">Expressions in Conditionals (, , , , , )</a></li><li><a href="substitutions-reference#header-relational-and-logical-operators">Relational and Logical Operators</a></li><li><a href="substitutions-reference#header-array-iteration">Array Iteration</a></li><li><a href="substitutions-reference#header-links-and-substitution-expressions-within-substitution-values">Links and Substitution Expressions Within Substitution Values</a></li><li><a href="substitutions-reference#header-default-values">Default Values</a></li><li><a href="substitutions-reference#header-macros">Macros</a></li><li><a href="substitutions-reference#header-reserved-recipient-substitution-variables">Reserved Recipient Substitution Variables</a></li><li><a href="substitutions-reference#header-substitutions-in-email_rfc822-headers">Substitutions in email_rfc822 Headers</a></li><li><a href="substitutions-reference#header-encoding-rules">Encoding Rules</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="account" class="text-uppercase">Account</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="account#header-using-postman">Using Postman</a></li><li><a href="account#account-account-get">Get your account information</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="bounce-domains" class="text-uppercase">Bounce Domains</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="bounce-domains#header-using-postman">Using Postman</a></li><li><a href="bounce-domains#header-bounce-domains-attributes">Bounce Domains Attributes</a></li><li><a href="bounce-domains#header-status-attributes">Status Attributes</a></li><li><a href="bounce-domains#bounce-domains-create-and-list">Create and List</a><ul class="list-unstyled"><li><a href="bounce-domains#bounce-domains-create-and-list-post">Create a Bounce Domain</a></li><li><a href="bounce-domains#bounce-domains-create-and-list-get">List Bounce Domains</a></li></ul></li><li><a href="bounce-domains#bounce-domains-retrieve-and-delete">Retrieve and Delete</a><ul class="list-unstyled"><li><a href="bounce-domains#bounce-domains-retrieve-and-delete-get">Retrieve a Bounce Domain</a></li><li><a href="bounce-domains#bounce-domains-retrieve-and-delete-delete">Delete a Bounce Domain</a></li></ul></li><li><a href="bounce-domains#bounce-domains-verify-post">Verify a Bounce Domain</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="inbound-domains" class="text-uppercase">Inbound Domains</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="inbound-domains#header-inbound-domains-attributes">Inbound Domains Attributes</a></li><li><a href="inbound-domains#header-using-postman">Using Postman</a></li><li><a href="inbound-domains#inbound-domains-create-and-list">Create and List</a><ul class="list-unstyled"><li><a href="inbound-domains#inbound-domains-create-and-list-post">Create an Inbound Domain</a></li><li><a href="inbound-domains#inbound-domains-create-and-list-get">List all Inbound Domains</a></li></ul></li><li><a href="inbound-domains#inbound-domains-retrieve-and-delete">Retrieve and Delete</a><ul class="list-unstyled"><li><a href="inbound-domains#inbound-domains-retrieve-and-delete-get">Retrieve an Inbound Domain</a></li><li><a href="inbound-domains#inbound-domains-retrieve-and-delete-delete">Delete an Inbound Domain</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><a href="ip-pools" class="text-uppercase">IP Pools</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="ip-pools#header-using-postman">Using Postman</a></li><li><a href="ip-pools#header-ip-pool-properties">IP Pool Properties</a></li><li><a href="ip-pools#ip-pools-ip-pools">IP Pools</a><ul class="list-unstyled"><li><a href="ip-pools#ip-pools-ip-pools-get">List IP Pools</a></li><li><a href="ip-pools#ip-pools-ip-pools-post">Create an IP Pool</a></li></ul></li><li><a href="ip-pools#ip-pools-ip-pools-resource">IP Pools Resource</a><ul class="list-unstyled"><li><a href="ip-pools#ip-pools-ip-pools-resource-get">Get IP Pool</a></li><li><a href="ip-pools#ip-pools-ip-pools-resource-put">Update an IP Pool</a></li><li><a href="ip-pools#ip-pools-ip-pools-resource-delete">Delete an IP Pool</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><a href="metrics" class="text-uppercase">Metrics</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="metrics#header-data-retention">Data retention</a></li><li><a href="metrics#header-using-postman">Using Postman</a></li><li><a href="metrics#header-metrics-api-deliverability-glossary">Metrics API Deliverability Glossary</a></li><li><a href="metrics#metrics-discoverability-links-get">Metrics Discoverability Links</a></li><li><a href="metrics#metrics-deliverability-metrics-get">Deliverability Metrics Summary</a></li><li><a href="metrics#metrics-deliverability-metrics-by-domain-get">Deliverability Metrics by Domain</a></li><li><a href="metrics#metrics-deliverability-metrics-by-binding-get">Deliverability Metrics by Binding</a></li><li><a href="metrics#metrics-deliverability-metrics-by-binding-group-get">Deliverability Metrics by Binding Group</a></li><li><a href="metrics#metrics-deliverability-metrics-by-sending-ip-get">Deliverability Metrics by Sending IP</a></li><li><a href="metrics#metrics-deliverability-metrics-by-ip-pool-get">Deliverability Metrics by IP Pool</a></li><li><a href="metrics#metrics-deliverability-metrics-by-sending-domain-get">Deliverability Metrics by Sending Domain</a></li><li><a href="metrics#metrics-deliverability-metrics-by-subaccount-get">Deliverability Metrics by Subaccount</a></li><li><a href="metrics#metrics-deliverability-metrics-by-campaign-get">Deliverability Metrics by Campaign</a></li><li><a href="metrics#metrics-deliverability-metrics-by-template-get">Deliverability Metrics by Template</a></li><li><a href="metrics#metrics-deliverability-metrics-by-watched-domain-get">Deliverability Metrics by Watched Domain</a></li><li><a href="metrics#metrics-time-series-get">Time-Series Metrics</a></li><li><a href="metrics#metrics-bounce-reasons-get">Bounce Reason Metrics</a></li><li><a href="metrics#metrics-bounce-reasons-by-domain-get">Bounce Reason Metrics By Domain</a></li><li><a href="metrics#metrics-bounce-classifications-get">Bounce Classification Metrics</a></li><li><a href="metrics#metrics-rejection-reasons-get">Rejection Reason Metrics</a></li><li><a href="metrics#metrics-rejection-reasons-by-domain-get">Rejection Reason Metrics By Domain</a></li><li><a href="metrics#metrics-delay-reasons-get">Delay Reason Metrics</a></li><li><a href="metrics#metrics-delay-reasons-by-domain-get">Delay Reason Metrics By Domain</a></li><li><a href="metrics#metrics-engagement-details-get">Engagement Details</a></li><li><a href="metrics#metrics-deliveries-by-attempt-get">Deliveries By Attempt</a></li><li><a href="metrics#metrics-binding-groups-list-get">Bindings Groups List</a></li><li><a href="metrics#metrics-binding-groups-list-get-1">Bindings List</a></li><li><a href="metrics#metrics-ip-pools-list-get">IP Pools List</a></li><li><a href="metrics#metrics-sending-ips-list-get">Sending IPs List</a></li><li><a href="metrics#metrics-campaigns-list-get">Campaigns List</a></li><li><a href="metrics#metrics-domains-list-get">Domains List</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="message-events" class="text-uppercase">Message Events</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="message-events#header-data-retention">Data retention</a></li><li><a href="message-events#header-using-postman">Using Postman</a></li><li><a href="message-events#header-copyrights">Copyrights</a></li><li><a href="message-events#message-events-events-documentation-get">Documentation</a></li><li><a href="message-events#message-events-events-samples-get">Samples</a></li><li><a href="message-events#message-events-message-events-get">Search for Message Events</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="recipient-lists" class="text-uppercase">Recipient Lists</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="recipient-lists#header-using-postman">Using Postman</a></li><li><a href="recipient-lists#header-recipient-list-attributes">Recipient List Attributes</a></li><li><a href="recipient-lists#header-recipient-attributes">Recipient Attributes</a></li><li><a href="recipient-lists#header-address-attributes">Address Attributes</a></li><li><a href="recipient-lists#recipient-lists-create-post">Create a Recipient List</a></li><li><a href="recipient-lists#recipient-lists-retrieve-get">Retrieve a Recipient List</a></li><li><a href="recipient-lists#recipient-lists-list-get">List all Recipient Lists</a></li><li><a href="recipient-lists#recipient-lists-update-put">Update a Recipient List</a></li><li><a href="recipient-lists#recipient-lists-delete-delete">Delete a Recipient List</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="relay-webhooks" class="text-uppercase">Relay Webhooks</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="relay-webhooks#header-using-postman">Using Postman</a></li><li><a href="relay-webhooks#header-relay-webhooks-object-properties">Relay Webhooks Object Properties</a></li><li><a href="relay-webhooks#header-match-object-properties">Match Object Properties</a></li><li><a href="relay-webhooks#header-field-definitions">Field Definitions</a></li><li><a href="relay-webhooks#header-content-attributes">Content Attributes</a></li><li><a href="relay-webhooks#relay-webhooks-create-and-list">Create and List</a><ul class="list-unstyled"><li><a href="relay-webhooks#relay-webhooks-create-and-list-post">Create a Relay Webhook</a></li><li><a href="relay-webhooks#relay-webhooks-create-and-list-get">List all Relay Webhooks</a></li></ul></li><li><a href="relay-webhooks#relay-webhooks-retrieve,-update,-and-delete">Retrieve, Update, and Delete</a><ul class="list-unstyled"><li><a href="relay-webhooks#relay-webhooks-retrieve,-update,-and-delete-get">Retrieve a Relay Webhook</a></li><li><a href="relay-webhooks#relay-webhooks-retrieve,-update,-and-delete-put">Update a Relay Webhook</a></li><li><a href="relay-webhooks#relay-webhooks-retrieve,-update,-and-delete-delete">Delete a Relay Webhook</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><a href="sending-domains" class="text-uppercase">Sending Domains</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="sending-domains#header-using-postman">Using Postman</a></li><li><a href="sending-domains#header-sending-domain-attributes">Sending Domain Attributes</a></li><li><a href="sending-domains#header-dkim-attributes">DKIM Attributes</a></li><li><a href="sending-domains#header-status-attributes">Status Attributes</a></li><li><a href="sending-domains#header-verify-attributes">Verify Attributes</a></li><li><a href="sending-domains#header-dns-attributes">DNS Attributes</a></li><li><a href="sending-domains#sending-domains-create">Create</a><ul class="list-unstyled"><li><a href="sending-domains#sending-domains-create-post">Create a Sending Domain</a></li><li><a href="sending-domains#sending-domains-create-get">List all Sending Domains</a></li></ul></li><li><a href="sending-domains#sending-domains-retrieve,-update,-and-delete">Retrieve, Update, and Delete</a><ul class="list-unstyled"><li><a href="sending-domains#sending-domains-retrieve,-update,-and-delete-get">Retrieve a Sending Domain</a></li><li><a href="sending-domains#sending-domains-retrieve,-update,-and-delete-put">Update a Sending Domain</a></li><li><a href="sending-domains#sending-domains-retrieve,-update,-and-delete-delete">Delete a Sending Domain</a></li></ul></li><li><a href="sending-domains#sending-domains-verify-post">Verify a Sending Domain</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="sending-ips" class="text-uppercase">Sending IPs</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="sending-ips#header-using-postman">Using Postman</a></li><li><a href="sending-ips#header-sending-ip-properties">Sending IP Properties</a></li><li><a href="sending-ips#sending-ips-sending-ips-get">Get all sending IPs</a></li><li><a href="sending-ips#sending-ips-sending-ip-resource">Sending IP Resource</a><ul class="list-unstyled"><li><a href="sending-ips#sending-ips-sending-ip-resource-get">Get a Sending IP</a></li><li><a href="sending-ips#sending-ips-sending-ip-resource-put">Update a Sending IP</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><a href="subaccounts" class="text-uppercase">Subaccounts</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="subaccounts#subaccounts-subaccounts-collection">Subaccounts Collection</a><ul class="list-unstyled"><li><a href="subaccounts#subaccounts-subaccounts-collection-get">List subaccounts</a></li><li><a href="subaccounts#subaccounts-subaccounts-collection-post">Create new subaccount</a></li></ul></li><li><a href="subaccounts#subaccounts-subaccounts-entity">Subaccounts Entity</a><ul class="list-unstyled"><li><a href="subaccounts#subaccounts-subaccounts-entity-get">List specific subaccount</a></li><li><a href="subaccounts#subaccounts-subaccounts-entity-put">Edit a subaccount</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><a href="suppression-list" class="text-uppercase">Suppression List</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="suppression-list#header-using-postman">Using Postman</a></li><li><a href="suppression-list#header-list-entry-attributes">List Entry Attributes</a></li><li><a href="suppression-list#suppression-list-bulk-insert-update-put">Insert or Update List Entries</a></li><li><a href="suppression-list#suppression-list-search-get">Search for List Entries</a></li><li><a href="suppression-list#suppression-list-retrieve,-delete">Retrieve, Delete</a><ul class="list-unstyled"><li><a href="suppression-list#suppression-list-retrieve,-delete-get">Retrieve a Recipient Suppression Status</a></li><li><a href="suppression-list#suppression-list-retrieve,-delete-delete">Delete a List Entry</a></li><li><a href="suppression-list#suppression-list-retrieve,-delete-put">Insert or Update a List Entry</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><a href="templates" class="text-uppercase">Templates</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="templates#header-using-postman">Using Postman</a></li><li><a href="templates#header-template-attributes">Template Attributes</a></li><li><a href="templates#header-content-attributes">Content Attributes</a></li><li><a href="templates#header-header-notes">Header Notes</a></li><li><a href="templates#header-email_rfc822-notes">email_rfc822 Notes</a></li><li><a href="templates#header-options-attributes">Options Attributes</a></li><li><a href="templates#header-error-attributes">Error Attributes</a></li><li><a href="templates#templates-create-and-list">Create and List</a><ul class="list-unstyled"><li><a href="templates#templates-create-and-list-post">Create a Template</a></li><li><a href="templates#templates-create-and-list-get">List all Templates</a></li></ul></li><li><a href="templates#templates-retrieve-get">Retrieve a Template</a></li><li><a href="templates#templates-update-put">Update a Template</a></li><li><a href="templates#templates-preview-post">Preview a Template</a></li><li><a href="templates#templates-delete-delete">Delete a Template</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="tracking-domains" class="text-uppercase">Tracking Domains</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="tracking-domains#header-using-postman">Using Postman</a></li><li><a href="tracking-domains#header-tracking-domains-attributes">Tracking Domains Attributes</a></li><li><a href="tracking-domains#header-port-secure-attributes">Port/Secure Attributes</a></li><li><a href="tracking-domains#header-status-attributes">Status Attributes</a></li><li><a href="tracking-domains#tracking-domains-create-and-list">Create and List</a><ul class="list-unstyled"><li><a href="tracking-domains#tracking-domains-create-and-list-post">Create a Tracking Domain</a></li><li><a href="tracking-domains#tracking-domains-create-and-list-get">List all Tracking Domains</a></li></ul></li><li><a href="tracking-domains#tracking-domains-retrieve,-update,-and-delete">Retrieve, Update, and Delete</a><ul class="list-unstyled"><li><a href="tracking-domains#tracking-domains-retrieve,-update,-and-delete-get">Retrieve a Tracking Domain</a></li><li><a href="tracking-domains#tracking-domains-retrieve,-update,-and-delete-put">Update a Tracking Domain</a></li><li><a href="tracking-domains#tracking-domains-retrieve,-update,-and-delete-delete">Delete a Tracking Domain</a></li></ul></li><li><a href="tracking-domains#tracking-domains-verify-post">Verify a Tracking Domain</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="transmissions" class="text-uppercase">Transmissions</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="transmissions#header-using-postman">Using Postman</a></li><li><a href="transmissions#header-transmission-attributes">Transmission Attributes</a></li><li><a href="transmissions#header-options-attributes">Options Attributes</a></li><li><a href="transmissions#header-inline-content-attributes">Inline Content Attributes</a></li><li><a href="transmissions#header-header-notes">Header Notes</a></li><li><a href="transmissions#header-email_rfc822-notes">email_rfc822 Notes</a></li><li><a href="transmissions#header-attachment-attributes">Attachment Attributes</a></li><li><a href="transmissions#header-inline-image-attributes">Inline Image Attributes</a></li><li><a href="transmissions#header-using-a-stored-template">Using a Stored Template</a></li><li><a href="transmissions#header-using-a-stored-recipient-list">Using a Stored Recipient List</a></li><li><a href="transmissions#header-scheduled-transmissions">Scheduled Transmissions</a></li><li><a href="transmissions#transmissions-create-post">Create a Transmission</a></li><li><a href="transmissions#transmissions-retrieve-and-delete">Retrieve and Delete</a><ul class="list-unstyled"><li><a href="transmissions#transmissions-retrieve-and-delete-get">Retrieve a Transmission</a></li><li><a href="transmissions#transmissions-retrieve-and-delete-delete">Delete a Transmission</a></li></ul></li><li><a href="transmissions#transmissions-list-get">List all Transmissions</a></li></ul></div></div><div class="resource-group"><div class="heading"><a href="webhooks" class="text-uppercase">Webhooks</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="webhooks#header-using-postman">Using Postman</a></li><li><a href="webhooks#header-webhooks-object-properties">Webhooks Object Properties</a></li><li><a href="webhooks#webhooks-events-documentation-get">Documentation</a></li><li><a href="webhooks#webhooks-events-samples-get">Samples</a></li><li><a href="webhooks#webhooks-create-post">Create a Webhook</a></li><li><a href="webhooks#webhooks-retrieve-get">Retrieve Webhook Details</a></li><li><a href="webhooks#webhooks-list-get">List all Webhooks</a></li><li><a href="webhooks#webhooks-update-and-delete">Update and Delete</a><ul class="list-unstyled"><li><a href="webhooks#webhooks-update-and-delete-put">Update a Webhook</a></li><li><a href="webhooks#webhooks-update-and-delete-delete">Delete a Webhook</a></li></ul></li><li><a href="webhooks#webhooks-validate-post">Validate a Webhook</a></li><li><a href="webhooks#webhooks-batch-status-get">Retrieve Status Information</a></li></ul></div></div><div class="resource-group"><div class="heading current"><a href="smtp-api" class="text-uppercase">SMTP API</a></div><div class="collapse-content"><ul class="list-unstyled"><li><a href="smtp-api#header-options-attributes">Options Attributes</a></li><li><a href="smtp-api#header-sending-messages-with-cc,-bcc,-and-archive-recipients">Sending Messages with cc, bcc, and archive Recipients</a></li><li><a href="smtp-api#header-comments-on-header-length">Comments on Header Length</a></li></ul></div></div></nav></div><div id="contentblock"><header><h1 id="top"></h1></header><section class="resource-group searchable"><h1 id="smtp-api" class="group-heading">SMTP API <a href="#smtp-api" class="permalink"></a></h1><div class="markdown"><p><a name="smtp-api"></a></p>
<p><strong>Note</strong>: See <a href="index.html#header-smtp-relay-endpoints">SMTP Relay Endpoints</a> for the SMTP client configuration needed to use SparkPost or SparkPost Elite as an SMTP relay.</p>
<p>Through use of the X-MSYS-API header in a message sent to SparkPost and SparkPost Elite through SMTP,
you can now specify a campaign id, metadata,
tags, IP pool, Cc, Bcc, and archive recipient lists and disable open and/or click tracking.</p>
<p><strong>Note</strong>: To use this option you should be familiar with how to encode
options as JSON strings, as the value of the header field is a JSON object that specifies the relevant options:</p>
<pre><code>X-MSYS-<span class="hljs-string">API:</span> {<span class="hljs-string">"options"</span> : {<span class="hljs-string">"open_tracking"</span> : <span class="hljs-literal">false</span>, <span class="hljs-string">"click_tracking"</span> : <span class="hljs-literal">true</span>},
   <span class="hljs-string">"metadata"</span> : {<span class="hljs-string">"key"</span> : <span class="hljs-string">"value"</span>}, <span class="hljs-string">"tags"</span> : [<span class="hljs-string">"cat"</span>, <span class="hljs-string">"dog"</span>], <span class="hljs-string">"campaign_id"</span> :
   <span class="hljs-string">"my_campaign"</span>}</code></pre>
<p>Click and open tracking are disabled by default in SMTP messages sent through SparkPost.  To enable click and open tracking in SMTP messages, add the X-MSYS-API header as follows:</p>
<pre><code>X-MSYS-<span class="hljs-string">API:</span> { <span class="hljs-string">"options"</span> : { <span class="hljs-string">"open_tracking"</span> : <span class="hljs-literal">true</span>, <span class="hljs-string">"click_tracking"</span> : <span class="hljs-literal">true</span> } }</code></pre>
<p><strong>Note</strong>: Key-Value <a href="substitutions-reference.html">Substitutions</a> are not supported in SMTP API.
substitution_data provided in the X-MSYS-API header will be ignored.</p>
<p>The fields supported in the X-MSYS-API header are as follows:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>campaign_id</td>
<td>string</td>
<td>Name of the campaign to associate with the SMTP message</td>
<td>no</td>
<td>Maximum length - 64 bytes (same restriction as the REST API)</td>
</tr>
<tr>
<td>metadata</td>
<td>JSON object</td>
<td>JSON key value pairs associated with the SMTP message</td>
<td>no</td>
<td>A maximum of 1000 bytes of metadata is available in click/open events.</td>
</tr>
<tr>
<td>cc</td>
<td>JSON array</td>
<td>Array of recipient addresses that will be included in the “Cc” header</td>
<td>no</td>
<td>A unique message with a unique tracking URL will be generated for each recipient in this list.</td>
</tr>
<tr>
<td>bcc</td>
<td>JSON array</td>
<td>Array of recipient addresses that will be hidden from all other recipients</td>
<td>no</td>
<td>A unique message with a unique tracking URL will be generated for each recipient in this list.</td>
</tr>
<tr>
<td>archive</td>
<td>JSON array</td>
<td>Array of recipient addresses that will be hidden from all other recipients</td>
<td>no</td>
<td>A unique message will be generated for each recipient in this list. The archive copy of the message contains tracking URLs identical to the recipient. For a full description, see the “What is an archive recipient?” section.</td>
</tr>
<tr>
<td>tags</td>
<td>JSON array</td>
<td>Array of text labels associated with the SMTP message</td>
<td>no</td>
<td>Tags are available in click/open events. Maximum number of tags is 10 per recipient, 100 system wide.</td>
</tr>
<tr>
<td>options</td>
<td>JSON object</td>
<td>JSON object in which SMTP API options are defined</td>
<td>no</td>
<td>For a full description, see the Options Attributes.</td>
</tr>
</tbody>
</table>
<h2 id="header-options-attributes">Options Attributes <a class="permalink" href="#header-options-attributes" aria-hidden="true">¶</a></h2>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>open_tracking</td>
<td>boolean</td>
<td>Whether open tracking is enabled for this SMTP message</td>
<td>no</td>
<td>Defaults to false (see note below).</td>
</tr>
<tr>
<td>click_tracking</td>
<td>boolean</td>
<td>Whether click tracking is enabled for this SMTP message</td>
<td>no</td>
<td>Defaults to false (see note below).</td>
</tr>
<tr>
<td>transactional</td>
<td>boolean</td>
<td>Whether message is transactional or non-transactional for unsubscribe and suppression purposes (<strong>Note:</strong> no List-Unsubscribe header is included in transactional messages)</td>
<td>no</td>
<td>Defaults to false.</td>
</tr>
<tr>
<td>sandbox</td>
<td>boolean</td>
<td>Whether or not to use the sandbox sending domain ( <strong>Note:</strong> SparkPost only )</td>
<td>no</td>
<td>Defaults to false.</td>
</tr>
<tr>
<td>skip_suppression</td>
<td>boolean</td>
<td>Whether or not to ignore customer suppression rules, for this SMTP message only. Only applicable if your configuration supports this parameter. ( <strong>Note:</strong> SparkPost Elite only )</td>
<td>no</td>
<td>Defaults to false.</td>
</tr>
<tr>
<td>ip_pool</td>
<td>string</td>
<td>The ID of a dedicated IP pool associated with your account ( <strong>Note:</strong> SparkPost only ).  If this field is not provided, the account’s default dedicated IP pool is used (if there are IPs assigned to it).  To explicitly bypass the account’s default dedicated IP pool and instead fallback to the shared pool, specify a value of “sp_shared”. Please note that this option does not apply to subaccounts.</td>
<td>no</td>
<td>For more information on dedicated IPs, see the <a href="https://support.sparkpost.com/customer/en/portal/articles/2002977-dedicated-ip-addresses">Support Center</a></td>
</tr>
<tr>
<td>inline_css</td>
<td>boolean</td>
<td>Whether or not to perform CSS inlining in HTML content</td>
<td>no</td>
<td>Defaults to false.</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The <code>open_tracking</code> and <code>click_tracking</code> variables may also be set account-wide in your <a href="https://app.sparkpost.com/account/smtp">SMTP relay account settings</a>.</p>
<h2 id="header-sending-messages-with-cc,-bcc,-and-archive-recipients">Sending Messages with cc, bcc, and archive Recipients <a class="permalink" href="#header-sending-messages-with-cc,-bcc,-and-archive-recipients" aria-hidden="true">¶</a></h2>
<p>When submitting an email via SMTP that includes the X-MSYS-API header, you may specify a JSON array for cc, bcc, and archive lists.  For each address in each of these arrays, a message will be generated. Messages will be generated with the following headers:</p>
<ul>
<li>
<p>It is the responsibility of the user to include their own “To” header in the body of the message.</p>
</li>
<li>
<p>All messages will display the “Cc” header and the value of that header will include all addresses listed in the “cc” array.</p>
</li>
<li>
<p>The “bcc” recipients will each receive a message with the “To” and “Cc” headers described above and, additionally, will see a “Bcc” header with ONLY their own recipient address as the value of the header.</p>
</li>
<li>
<p>The “archive” recipients will each receive a message with the “To” and “Cc” headers described above however, they will not have a “Bcc” header.</p>
</li>
</ul>
<p>The following are key points about reporting and tracking for cc, bcc, and archive messages:</p>
<ul>
<li>
<p>Each recipient (To, Cc, Bcc, and archive) is counted as a targeted message.</p>
</li>
<li>
<p>A “rcpt_type” field is available during events through the Webhooks, which designates if the message was a Cc, Bcc, or archive copy.</p>
</li>
<li>
<p>A “transmission_id” field is available during events through the Webhooks, which can be used to correlate the Cc, Bcc, and archive versions of the messages to one another.</p>
</li>
</ul>
<p><strong>What is an archive recipient?</strong></p>
<p>Recipients in the “archive” list will receive an exact replica of the message that was sent to the RCPT TO address. In particular, any encoded links intended for the RCPT TO recipient will appear <em>as is</em> in the archive messages.  In contrast, recipients in the “bcc” list will have links encoded specific to their address. (There will be some differences in headers such as X-MSFBL or List-Unsubscribe headers.)</p>
<p>For example:</p>
<pre><code><span class="hljs-attribute">X-MSYS-API</span>: <span class="hljs-string">{</span>

<span class="perl">   <span class="hljs-string">"cc"</span> : [ <span class="hljs-string">"cc_email1<span class="hljs-variable">@corp</span>.com"</span>, <span class="hljs-string">"cc_email2<span class="hljs-variable">@corp</span>.com"</span> ], 
   <span class="hljs-string">"bcc"</span> : [ <span class="hljs-string">"bcc_email1<span class="hljs-variable">@corp</span>.com"</span>, <span class="hljs-string">"bcc_email2<span class="hljs-variable">@corp</span>.com"</span> ], 
   <span class="hljs-string">"archive"</span> : [ <span class="hljs-string">"archive_email<span class="hljs-variable">@corp</span>.com"</span> ], 

   <span class="hljs-string">"options"</span> : {<span class="hljs-string">"open_tracking"</span> : false, <span class="hljs-string">"click_tracking"</span> : true},
}
</span></code></pre>
<p>You may not specify more than a total of 1000 total recipients in those 3 lists.</p>
<p>You may also specify name and email keys in the “cc” and “bcc” JSON arrays in order to produce a friendly “Cc” or “Bcc” header. For example:</p>
<pre><code>X-MSYS-API: {
   <span class="hljs-string">"cc"</span> : [
    {
    <span class="hljs-string">"email"</span> : <span class="hljs-string">"cc_recip_1@gmail.com"</span>,
    <span class="hljs-string">"name"</span> : <span class="hljs-string">"CC 1"</span>
    },
    {
    <span class="hljs-string">"email"</span> : <span class="hljs-string">"cc_recip_2@gmail.com"</span>,
    <span class="hljs-string">"name"</span> : <span class="hljs-string">"CC 2"</span>
    }
  ]

  <span class="hljs-string">"bcc"</span> : [
    {
    <span class="hljs-string">"email"</span> : <span class="hljs-string">"bcc_recip_1@gmail.com"</span>,
    <span class="hljs-string">"name"</span> : <span class="hljs-string">"BCC 1"</span>
    }
  ]
}</code></pre>
<h2 id="header-comments-on-header-length">Comments on Header Length <a class="permalink" href="#header-comments-on-header-length" aria-hidden="true">¶</a></h2>
<p>SMTP defines a maximum line length of 1000 characters (including CRLF).  If the value of the X-MSYS-API JSON string is
longer than 998 characters, it will need to be folded across multiple lines before the message is injected.  An example
of a folded header:</p>
<pre><code>X-MSYS-<span class="hljs-string">API:</span> {<span class="hljs-string">"options"</span> : {<span class="hljs-string">"open_tracking"</span> : <span class="hljs-literal">false</span>, <span class="hljs-string">"click_tracking"</span> : <span class="hljs-literal">true</span>},
   <span class="hljs-string">"metadata"</span> : {<span class="hljs-string">"key"</span> : <span class="hljs-string">"value"</span>}, <span class="hljs-string">"tags"</span> : [<span class="hljs-string">"cat"</span>, <span class="hljs-string">"dog"</span>], <span class="hljs-string">"campaign_id"</span> :
   <span class="hljs-string">"my_campaign"</span>}</code></pre>
<p>Be aware that when the header is unfolded on the receiving system, as per rfc2822 (<a href="https://www.ietf.org/rfc/rfc2822.txt">https://www.ietf.org/rfc/rfc2822.txt</a>),
a single space will be added between each line of the header.</p>
<p>For example:</p>
<pre><code>X-MSYS-API: {<span class="hljs-string">"options"</span> : {<span class="hljs-string">"open_tracking"</span> : false }, <span class="hljs-string">"campaign_id"</span> : <span class="hljs-string">"my_awes
   ome_campaign"</span> }</code></pre>
<p>Will be unfolded as</p>
<pre><code>X-MSYS-<span class="hljs-string">API:</span> {<span class="hljs-string">"options"</span> : {<span class="hljs-string">"open_tracking"</span> : <span class="hljs-literal">false</span> }, <span class="hljs-string">"campaign_id"</span> : <span class="hljs-string">"my_awes ome_campaign"</span> }</code></pre>
<p>Note the space that was introduced in the “my_awes ome_campaign” string.</p>
</div></section></div></div></div>